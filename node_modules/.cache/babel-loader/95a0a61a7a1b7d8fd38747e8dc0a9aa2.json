{"ast":null,"code":"import _classCallCheck from\"/home/lin/Desktop/ccmtptpm/search-book/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lin/Desktop/ccmtptpm/search-book/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/lin/Desktop/ccmtptpm/search-book/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/lin/Desktop/ccmtptpm/search-book/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import SearchArea from'./SearchArea';import request from'superagent';import BookList from'./BookList';var Books=/*#__PURE__*/function(_Component){_inherits(Books,_Component);var _super=_createSuper(Books);function Books(props){var _this;_classCallCheck(this,Books);_this=_super.call(this,props);_this.searchBook=function(e){e.preventDefault();request.get(\"https://www.googleapis.com/books/v1/volumes\").query({q:_this.state.searchField}).then(function(data){//console.log(data);\nvar cleanData=_this.cleanData(data);_this.setState({books:cleanData});});};_this.handleSearch=function(e){//  console.log(e.target.value);\n_this.setState({searchField:e.target.value});};_this.handleSort=function(e){console.log(e.target.value);_this.setState({sort:e.target.value});};_this.cleanData=function(data){var cleanedData=data.body.items.map(function(book){if(book.volumeInfo.hasOwnProperty('publishedDate')===false){book.volumeInfo['publishedDate']='0000';}else if(book.volumeInfo.hasOwnProperty('imageLinks')===false){book.volumeInfo['imageLinks']={thumbnail:'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101065/112815953-stock-vector-no-image-available-icon-flat-vector.jpg?ver=6'};}return book;});return cleanedData;};_this.state={books:[],searchField:'javascript',sort:''};return _this;}_createClass(Books,[{key:\"render\",value:function render(){var _this2=this;var filteredBooks=this.state.books.sort(function(a,b){if(_this2.state.sort==='Newest'){console.log(\"in newest\");return parseInt(b.volumeInfo.publishedDate.substring(0,4))-parseInt(a.volumeInfo.publishedDate.substring(0,4));}else if(_this2.state.sort==='Oldest'){return parseInt(a.volumeInfo.publishedDate.substring(0,4))-parseInt(b.volumeInfo.publishedDate.substring(0,4));}return;});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchArea,{searchBook:this.searchBook,handleSearch:this.handleSearch,handleSort:this.handleSort}),/*#__PURE__*/React.createElement(BookList,{books:filteredBooks}));}}]);return Books;}(Component);export default Books;","map":{"version":3,"sources":["/home/lin/Desktop/ccmtptpm/search-book/src/Books.js"],"names":["React","Component","SearchArea","request","BookList","Books","props","searchBook","e","preventDefault","get","query","q","state","searchField","then","data","cleanData","setState","books","handleSearch","target","value","handleSort","console","log","sort","cleanedData","body","items","map","book","volumeInfo","hasOwnProperty","thumbnail","filteredBooks","a","b","parseInt","publishedDate","substring"],"mappings":"omBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,C,GAEMC,CAAAA,K,8FACJ,eAAYC,KAAZ,CAAmB,uCACjB,uBAAMA,KAAN,EADiB,MASnBC,UATmB,CASN,SAACC,CAAD,CAAO,CAClBA,CAAC,CAACC,cAAF,GACAN,OAAO,CAACO,GAAR,CAAY,6CAAZ,EACGC,KADH,CACS,CAAEC,CAAC,CAAE,MAAKC,KAAL,CAAWC,WAAhB,CADT,EAEGC,IAFH,CAEQ,SAACC,IAAD,CAAU,CACd;AACA,GAAMC,CAAAA,SAAS,CAAG,MAAKA,SAAL,CAAeD,IAAf,CAAlB,CACA,MAAKE,QAAL,CAAc,CAAEC,KAAK,CAAEF,SAAT,CAAd,EACD,CANH,EAQD,CAnBkB,OAqBnBG,YArBmB,CAqBJ,SAACZ,CAAD,CAAO,CACpB;AACA,MAAKU,QAAL,CAAc,CAAEJ,WAAW,CAAEN,CAAC,CAACa,MAAF,CAASC,KAAxB,CAAd,EACD,CAxBkB,OA0BnBC,UA1BmB,CA0BN,SAACf,CAAD,CAAO,CAClBgB,OAAO,CAACC,GAAR,CAAYjB,CAAC,CAACa,MAAF,CAASC,KAArB,EACA,MAAKJ,QAAL,CAAc,CAAEQ,IAAI,CAAElB,CAAC,CAACa,MAAF,CAASC,KAAjB,CAAd,EACD,CA7BkB,OA8BnBL,SA9BmB,CA8BP,SAACD,IAAD,CAAU,CACpB,GAAMW,CAAAA,WAAW,CAAGX,IAAI,CAACY,IAAL,CAAUC,KAAV,CAAgBC,GAAhB,CAAoB,SAACC,IAAD,CAAU,CAChD,GAAIA,IAAI,CAACC,UAAL,CAAgBC,cAAhB,CAA+B,eAA/B,IAAoD,KAAxD,CAA+D,CAC7DF,IAAI,CAACC,UAAL,CAAgB,eAAhB,EAAmC,MAAnC,CACD,CAFD,IAGK,IAAID,IAAI,CAACC,UAAL,CAAgBC,cAAhB,CAA+B,YAA/B,IAAiD,KAArD,CAA4D,CAC/DF,IAAI,CAACC,UAAL,CAAgB,YAAhB,EAAgC,CAAEE,SAAS,CAAE,2JAAb,CAAhC,CACD,CACD,MAAOH,CAAAA,IAAP,CACD,CARmB,CAApB,CASA,MAAOJ,CAAAA,WAAP,CACD,CAzCkB,CAEjB,MAAKd,KAAL,CAAa,CACXM,KAAK,CAAE,EADI,CAEXL,WAAW,CAAE,YAFF,CAGXY,IAAI,CAAE,EAHK,CAAb,CAFiB,aAOlB,C,yDAoCQ,iBACP,GAAMS,CAAAA,aAAa,CAAG,KAAKtB,KAAL,CAAWM,KAAX,CAAiBO,IAAjB,CAAsB,SAACU,CAAD,CAAIC,CAAJ,CAAU,CACpD,GAAI,MAAI,CAACxB,KAAL,CAAWa,IAAX,GAAoB,QAAxB,CAAkC,CAChCF,OAAO,CAACC,GAAR,CAAY,WAAZ,EACA,MAAOa,CAAAA,QAAQ,CAACD,CAAC,CAACL,UAAF,CAAaO,aAAb,CAA2BC,SAA3B,CAAqC,CAArC,CAAwC,CAAxC,CAAD,CAAR,CAAuDF,QAAQ,CAACF,CAAC,CAACJ,UAAF,CAAaO,aAAb,CAA2BC,SAA3B,CAAqC,CAArC,CAAwC,CAAxC,CAAD,CAAtE,CACD,CAHD,IAIK,IAAI,MAAI,CAAC3B,KAAL,CAAWa,IAAX,GAAoB,QAAxB,CAAkC,CACrC,MAAOY,CAAAA,QAAQ,CAACF,CAAC,CAACJ,UAAF,CAAaO,aAAb,CAA2BC,SAA3B,CAAqC,CAArC,CAAwC,CAAxC,CAAD,CAAR,CAAuDF,QAAQ,CAACD,CAAC,CAACL,UAAF,CAAaO,aAAb,CAA2BC,SAA3B,CAAqC,CAArC,CAAwC,CAAxC,CAAD,CAAtE,CACD,CACD,OACD,CATqB,CAAtB,CAUA,mBACE,4CACE,oBAAC,UAAD,EACE,UAAU,CAAE,KAAKjC,UADnB,CAEE,YAAY,CAAE,KAAKa,YAFrB,CAGE,UAAU,CAAE,KAAKG,UAHnB,EADF,cAME,oBAAC,QAAD,EAAU,KAAK,CAAEY,aAAjB,EANF,CADF,CAUD,C,mBAjEiBlC,S,EAoEpB,cAAeI,CAAAA,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport SearchArea from './SearchArea';\nimport request from 'superagent';\nimport BookList from './BookList';\n\nclass Books extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      searchField: 'javascript',\n      sort: ''\n    }\n  }\n\n  searchBook = (e) => {\n    e.preventDefault();\n    request.get(\"https://www.googleapis.com/books/v1/volumes\")\n      .query({ q: this.state.searchField })\n      .then((data) => {\n        //console.log(data);\n        const cleanData = this.cleanData(data)\n        this.setState({ books: cleanData })\n      })\n\n  }\n\n  handleSearch = (e) => {\n    //  console.log(e.target.value);\n    this.setState({ searchField: e.target.value })\n  }\n\n  handleSort = (e) => {\n    console.log(e.target.value);\n    this.setState({ sort: e.target.value })\n  }\n  cleanData = (data) => {\n    const cleanedData = data.body.items.map((book) => {\n      if (book.volumeInfo.hasOwnProperty('publishedDate') === false) {\n        book.volumeInfo['publishedDate'] = '0000';\n      }\n      else if (book.volumeInfo.hasOwnProperty('imageLinks') === false) {\n        book.volumeInfo['imageLinks'] = { thumbnail: 'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101065/112815953-stock-vector-no-image-available-icon-flat-vector.jpg?ver=6' }\n      }\n      return book;\n    })\n    return cleanedData;\n  }\n\n  render() {\n    const filteredBooks = this.state.books.sort((a, b) => {\n      if (this.state.sort === 'Newest') {\n        console.log(\"in newest\")\n        return parseInt(b.volumeInfo.publishedDate.substring(0, 4)) - parseInt(a.volumeInfo.publishedDate.substring(0, 4));\n      }\n      else if (this.state.sort === 'Oldest') {\n        return parseInt(a.volumeInfo.publishedDate.substring(0, 4)) - parseInt(b.volumeInfo.publishedDate.substring(0, 4));\n      }\n      return;\n    })\n    return (\n      <div>\n        <SearchArea\n          searchBook={this.searchBook}\n          handleSearch={this.handleSearch}\n          handleSort={this.handleSort}\n        />\n        <BookList books={filteredBooks} />\n      </div>\n    );\n  }\n}\n\nexport default Books;\n"]},"metadata":{},"sourceType":"module"}