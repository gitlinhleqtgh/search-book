{"ast":null,"code":"var _jsxFileName = \"/home/lin/Desktop/ccvmtptpm/project-finderbook/src/Books.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport SearchArea from './SearchArea';\nimport request from 'superagent';\nimport BookList from './BookList';\n\nclass Books extends Component {\n  constructor(props) {\n    super(props);\n\n    this.searchBook = e => {\n      e.preventDefault();\n      request.get(\"https://www.googleapis.com/books/v1/volumes\").query({\n        q: this.state.searchField\n      }).then(data => {\n        //console.log(data);\n        const cleanData = this.cleanData(data);\n        this.setState({\n          books: cleanData\n        });\n      });\n    };\n\n    this.handleSearch = e => {\n      //  console.log(e.target.value);\n      this.setState({\n        searchField: e.target.value\n      });\n    };\n\n    this.handleSort = e => {\n      console.log(e.target.value);\n      this.setState({\n        sort: e.target.value\n      });\n    };\n\n    this.cleanData = data => {\n      const cleanedData = data.body.items.map(book => {\n        if (book.volumeInfo.hasOwnProperty('publishedDate') === false) {\n          book.volumeInfo['publishedDate'] = '0000';\n        } else if (book.volumeInfo.hasOwnProperty('imageLinks') === false) {\n          book.volumeInfo['imageLinks'] = {\n            thumbnail: 'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101065/112815953-stock-vector-no-image-available-icon-flat-vector.jpg?ver=6'\n          };\n        }\n\n        return book;\n      });\n      return cleanedData;\n    };\n\n    this.state = {\n      books: [],\n      searchField: 'javascript',\n      sort: ''\n    };\n  }\n\n  render() {\n    const filteredBooks = this.state.books.sort((a, b) => {\n      if (this.state.sort === 'Newest') {\n        console.log(\"in newest\");\n        return parseInt(b.volumeInfo.publishedDate.substring(0, 4)) - parseInt(a.volumeInfo.publishedDate.substring(0, 4));\n      } else if (this.state.sort === 'Oldest') {\n        return parseInt(a.volumeInfo.publishedDate.substring(0, 4)) - parseInt(b.volumeInfo.publishedDate.substring(0, 4));\n      }\n\n      return;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SearchArea, {\n      searchBook: this.searchBook,\n      handleSearch: this.handleSearch,\n      handleSort: this.handleSort,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(BookList, {\n      books: filteredBooks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Books;","map":{"version":3,"sources":["/home/lin/Desktop/ccvmtptpm/project-finderbook/src/Books.js"],"names":["React","Component","SearchArea","request","BookList","Books","constructor","props","searchBook","e","preventDefault","get","query","q","state","searchField","then","data","cleanData","setState","books","handleSearch","target","value","handleSort","console","log","sort","cleanedData","body","items","map","book","volumeInfo","hasOwnProperty","thumbnail","render","filteredBooks","a","b","parseInt","publishedDate","substring"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport SearchArea from './SearchArea';\nimport request from 'superagent';\nimport BookList from './BookList';\n\nclass Books extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      searchField: 'javascript',\n      sort: ''\n    }\n  }\n\n  searchBook = (e) => {\n    e.preventDefault();\n    request.get(\"https://www.googleapis.com/books/v1/volumes\")\n      .query({ q: this.state.searchField })\n      .then((data) => {\n        //console.log(data);\n        const cleanData = this.cleanData(data)\n        this.setState({ books: cleanData })\n      })\n\n  }\n\n  handleSearch = (e) => {\n    //  console.log(e.target.value);\n    this.setState({ searchField: e.target.value })\n  }\n\n  handleSort = (e) => {\n    console.log(e.target.value);\n    this.setState({ sort: e.target.value })\n  }\n  cleanData = (data) => {\n    const cleanedData = data.body.items.map((book) => {\n      if (book.volumeInfo.hasOwnProperty('publishedDate') === false) {\n        book.volumeInfo['publishedDate'] = '0000';\n      }\n      else if (book.volumeInfo.hasOwnProperty('imageLinks') === false) {\n        book.volumeInfo['imageLinks'] = { thumbnail: 'https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101065/112815953-stock-vector-no-image-available-icon-flat-vector.jpg?ver=6' }\n      }\n      return book;\n    })\n    return cleanedData;\n  }\n\n  render() {\n    const filteredBooks = this.state.books.sort((a, b) => {\n      if (this.state.sort === 'Newest') {\n        console.log(\"in newest\")\n        return parseInt(b.volumeInfo.publishedDate.substring(0, 4)) - parseInt(a.volumeInfo.publishedDate.substring(0, 4));\n      }\n      else if (this.state.sort === 'Oldest') {\n        return parseInt(a.volumeInfo.publishedDate.substring(0, 4)) - parseInt(b.volumeInfo.publishedDate.substring(0, 4));\n      }\n      return;\n    })\n    return (\n      <div>\n        <SearchArea\n          searchBook={this.searchBook}\n          handleSearch={this.handleSearch}\n          handleSort={this.handleSort}\n        />\n        <BookList books={filteredBooks} />\n      </div>\n    );\n  }\n}\n\nexport default Books;\n"]},"metadata":{},"sourceType":"module"}